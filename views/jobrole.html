{% extends "include/basePage.njk" %}

{% block content %}
  <div class="flex-grow-1 container mt-5 w-50 p-5 mx-auto">
    {% if errormessage %}
      <div class="alert alert-danger">{{ errormessage }}</div>
    {% elif role %}
      <h1 class="text-center mb-4 job-title">{{ role.roleName }}</h1>

      <br>

      <p class="job-header mt-5">Job Description</p>
      <p>{{ role.details.description }}</p>

      <p class="job-header mt-5">Responsibilities</p>
      <p>{{ role.details.responsibilities }}</p>

      <p class="job-header mt-5">Job Details</p>

      <ul>
        <li>
          <span class="job-detail-title mt-5">Location:</span>
          <span class="job-detail-text">{{ role.location }}</span>
        </li>
        <li>
          <span class="job-detail-title mt-5">Capability:</span>
          <span class="job-detail-text">{{ role.capability.capabilityName }}</span>
        </li>
        <li>
          <span class="job-detail-title mt-5">Band:</span>
          <span class="job-detail-text">{{ role.band.bandName }}</span>
        </li>
        <li>
          <span class="job-detail-title mt-5">Open Positions:</span>
          <span class="job-detail-text">{{ role.details.numberOfOpenPositions }}</span>
        </li>
        <li>
          <span class="job-detail-title mt-5">Closing Date:</span>
          <span class="job-detail-text">{{ role.closingDate | date }}</span>
        </li>
        <li>
          <span class="job-detail-title mt-5">Listing Status:</span>
          <span class="job-detail-text">{{ role.details.statusName }}</span>
        </li>
      </ul>

      {% if role.details.statusName == "Open" %}
        <a href="#" class="btn btn-primary fs-4 mt-5">Apply Now</a>
      {% else %}
        <button type="button" class="btn btn-primary fs-4 mt-5" disabled>Applications Closed</button>
      {% endif %}
      {% if role.details.sharepointURL %}
        <a href="{{ role.details.sharepointURL }}" class="btn btn-outline-secondary fs-4 mt-5 ms-3">More Details</a>
      {% endif %}

      {# <table class="table table-striped">
        <thead class="thead-dark">
          <tr>
            <th>Role Name</th>
            <th>Location</th>
            <th>Capability</th>
            <th>Band</th>
            <th>Description</th>
            <th>Responsibilities</th>
            <th>Number Of Open Positions</th>
            <th>Status</th>
            <th>Closing Date</th>
          </tr>
        </thead>
        <tbody>
          <tr>
              <td><a href="{{ role.details.sharepointURL }}">{{ role.roleName }}</a></td>
              <td>{{ role.location }}</td>
              <td>{{ role.capability.capabilityName }}</td>
              <td>{{ role.band.bandName }}</td>
              <td>{{ role.details.description }}</td>
              <td>{{ role.details.responsibilities }}</td>  
              <td>{{ role.details.numberOfOpenPositions }}</td>
              <td>{{ role.details.statusName }}</td>
              <td>{{ role.closingDate | date}}</td>
          </tr>
        </tbody>
      </table> #}
    {% else %}
      <div class="alert alert-danger">Failed to fetch role information.</div>
    {% endif %}
  </div>
{% endblock %}